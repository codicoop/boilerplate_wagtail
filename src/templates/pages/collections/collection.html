{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags i18n %}

{% block content %}

<main class="main collections-detail">

  {% include '../../components/heading.html' %}
  
  <section class="collections-detail__nav">
    <div class="grid-1">
    {# A l'enllaç actiu se li afegeix "is-active" #}
    {% for collection in collections %}
      <a class="collections-detail__nav-link grid-item-3" href="{% pageurl collection %}">
        <p>{{ collection.specific.title }}</p>
      </a>
    {% endfor %}
    {% if designers_page %}
      <a class="collections-detail__nav-link grid-item-3 is-active" href="{% pageurl designers_page %}">
        <p>{% translate 'The designers' %}</p>
      </a>
    {% endif %}
    </div>
  </section>

  <section class="collections-detail__intro">
    <div class="grid-1">
      <div class="collections-detail__intro-text grid-item-4-9">
        <p>{{ page.description }}</p>
      </div>
      <div class="collections-detail__intro-btn grid-item-4-6">
        {% if page.pdf.file %}
        <a href="{{ page.pdf.file.url }}" target="_blank">
          <div class="btn btn--dark">
            {% translate 'Download PDF catalogue' %}
          </div>
        </a>
        {% endif %}
      </div>
    </div>
  </section>

  <section id="myFilterApp"></section>

  <!-- <h3>Filtres</h3>
  <p>Idealment els filtres funcionaran amb react i per tant les opcions
  disponibles caldrà passar-les a través de variables JS, però de moment
  ho poso com a HTML per tenir un punt de partida.</p>
  <p>Llistat dels Models:</p>
  <ul>
    {% for id, name in available_models.items %}
    <li>ID: {{ id }}, nom: {{ name }}</li>
    {% endfor %}
  </ul>

  <p>Llistat dels Tipus:</p>
  <ul>
    {% for id, name in available_types.items %}
    <li>ID: {{ id }}, nom: {{ name }}</li>
    {% endfor %}
  </ul>

  <p>Llistat dels Acabats:</p>
  <ul>
    {% for id, name in available_finishings.items %}
    <li>ID: {{ id }}, nom: {{ name }}</li>
    {% endfor %}
  </ul> -->
  <!--
  En tots aquests llistats ho he posat de manera que disposis de la ID, per si de
  cas la necessites per fer funcionar els filtres.
  Si només vols els noms, el codi de cada llista es pot simplificar i quedaria així:
  <ul>
    {% for name in available_models.values %}
    <li>{{ name }}</li>
    {% endfor %}
  </ul>

  -->

  <section class="collections-detail__product-list">
    <div class="grid-2">
      {% for item in page.collection_items.all %}
        {% include "./block_item.html" with item=item %}
      {% endfor %}  
    </div>
  </section>

</main>

{% endblock %}

{% block extra_js %}
  <script id="data_for_react">
    const backData = { 
      type: [{% for id, name in available_types.items %}{ value: '{{ id }}', label: '{{ name }}' },{% endfor %}],
      model: [{% for id, name in available_models.items %}{ value: '{{ id }}', label: '{{ name }}' },{% endfor %}],
      finishing: [{% for id, name in finishings.items %}{ value: '{{ id }}', label: '{{ name }}' },{% endfor %}],
      // Necessitaria el llistat complet de items de la col·lecció
    }
  </script>
{% endblock %}
